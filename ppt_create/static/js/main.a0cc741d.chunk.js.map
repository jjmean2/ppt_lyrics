{"version":3,"sources":["parser/SongParser.ts","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayLikeToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/unsupportedIterableToArray.js","../../../src/objectKeysUtil.ts","../../../src/EnumWrapper.ts","../../../src/symbols.ts","../../../src/createUnhandledEntryError.ts","../../../src/EnumValueVisitee.ts","../../../src/EnumValueMappee.ts","../../../src/$enum.ts","parser/LineParser.ts","../../../src/visitEnumValue.ts","../../../src/mapEnumValue.ts","parser/LyricParser.ts","index.tsx"],"names":["SlideConvertMethod","_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","_createClass","protoProps","staticProps","prototype","_defineProperty","obj","value","_arrayLikeToArray","arr","len","arr2","Array","_createForOfIteratorHelper","o","allowArrayLike","it","Symbol","iterator","isArray","minLen","n","toString","call","slice","constructor","name","from","test","F","s","done","e","_e","f","err","normalCompletion","didErr","step","next","_e2","splitArrayBySize","array","size","result","element","last","push","convertBodyToSlide","body","lineSize","tag","lines","map","join","SongParser","songParts","currentTag","title","flow","linkUrl","bodys","tagBodyMap","Map","bodysWithNoTag","comments","part","category","LineCategory","undefined","this","logDiscard","toUpperCase","console","error","lastBody","concat","comment","filter","$0","flatMap","type","lineJoiner","toSlideBodyOrder","slidesFromFlowTokens","splitAsTokens","token","get","slidesFromUntaggedBodys","method","withFlowOrder","toSlideFlowOrder","withBodyOrder","Error","mapper","tagPatterns","flowTokenPatterns","isFlowToken","arg","some","pattern","split","separatorPatterns","scoreRange","titleSections","categoryScorer","empty","text","date","score","tokens","flowTokens","Math","ceil","separator","Line","inferedCategory","categories","$enum","getValues","reduce","current","checker","unknown","LineParser","songsCache","trim","lastLine","getSongParts","songs","currentIndex","currentPart","previousParts","isCompleteSong","splice","includes","firstBodyIndexAfterThis","findIndex","titleEndIndex","isTitleSection","getKeyOrDefault","forEach","line","index","start","end","convertSlideToFormText","slide","convertSongSlidesToFormText","slides","LyricParser","lineParser","songParsers","toSlides","window","onload","log","submitButton","document","getElementById","form","lyricsform","textArea","lyrics","hiddenBody","onclick","myDiv","createElement","parentElement","appendChild","parser","toFormText","textContent","submit"],"mappings":"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","file":"static/js/main.a0cc741d.chunk.js","sourcesContent":["import { LineCategory, splitAsTokens } from './LineParser'\n\nfunction splitArrayBySize<T>(array: T[], size: number): T[][] {\n  const result = [] as T[][]\n  for (const element of array) {\n    const last = result[result.length - 1]\n    if (last && last.length < size) {\n      last.push(element)\n    } else {\n      result.push([element])\n    }\n  }\n  return result\n}\n\nfunction convertBodyToSlide(body: Body, lineSize = 2): Slide[] {\n  const { tag, lines } = body\n  return splitArrayBySize(lines, lineSize).map(lines => ({\n    tag: tag,\n    body: lines.join('\\n'),\n  }))\n}\n\nexport type SongPart = {\n  start: number\n  end: number\n  category: LineCategory\n  lines: string[]\n}\n\nexport type Body = {\n  tag?: string\n  lines: string[]\n}\n\nexport enum SlideConvertMethod {\n  withFlowOrder,\n  withBodyOrder,\n}\n\nexport type Slide = {\n  tag?: string\n  body: string\n}\n\nexport class SongParser {\n  title?: string\n  flow?: string\n  linkUrl?: string\n  bodys: Body[] = []\n  tagBodyMap = new Map<string, Body>()\n  bodysWithNoTag: Body[] = []\n  comments: string[] = []\n\n  private logDiscard(type: string, part: SongPart | string[], lineJoiner = '\\n') {\n    if (part instanceof Array) {\n      console.error(`${type} part (${part}) is discarded`)\n    } else {\n      console.error(`${type} part (${part.lines.join(lineJoiner)}) is discarded`)\n    }\n  }\n\n  constructor(public songParts: SongPart[]) {\n    let currentTag: string | undefined\n    for (const part of songParts) {\n      if (part.category === LineCategory.title) {\n        currentTag = undefined\n        if (this.title === undefined) {\n          this.title = part.lines.join('\\n')\n        } else {\n          this.logDiscard('title', part)\n        }\n      }\n      if (part.category === LineCategory.flow) {\n        currentTag = undefined\n        if (this.flow === undefined) {\n          this.flow = part.lines.join(' ')\n        } else {\n          this.logDiscard('flow', part, ' ')\n        }\n      }\n      if (part.category === LineCategory.linkUrl) {\n        currentTag = undefined\n        if (this.linkUrl === undefined) {\n          this.linkUrl = part.lines.join('\\n')\n        } else {\n          this.logDiscard('linkUrl', part)\n        }\n      }\n      if (part.category === LineCategory.tag) {\n        currentTag = part.lines[0].toUpperCase() || undefined\n        console.error('set current tag', currentTag)\n        if (part.lines.length > 1) {\n          this.logDiscard('tag', part.lines.slice(1), ', ')\n        }\n      }\n      if (part.category === LineCategory.body) {\n        console.error('current tag for body', currentTag)\n        const lastBody = this.bodys[this.bodys.length - 1]\n        if (lastBody && currentTag && lastBody.tag === currentTag) {\n          lastBody.lines = lastBody.lines.concat(part.lines)\n        } else {\n          this.bodys.push({ tag: currentTag, lines: part.lines })\n        }\n      }\n      if (part.category === LineCategory.comment) {\n        this.comments.push(part.lines.join('\\n'))\n      }\n    }\n\n    this.bodysWithNoTag = this.bodys.filter($0 => $0.tag === undefined)\n    this.tagBodyMap = new Map(\n      this.bodys.flatMap(({ tag, lines }) => (tag ? [{ tag, lines }] : [])).map($0 => [$0.tag, $0]),\n    )\n  }\n\n  toSlideBodyOrder(): Slide[] {\n    return this.bodys.flatMap($0 => convertBodyToSlide($0))\n  }\n\n  toSlideFlowOrder(): Slide[] {\n    if (this.flow === undefined) {\n      return this.toSlideBodyOrder()\n    }\n    const flowTokens = splitAsTokens(this.flow).map($0 => $0.toUpperCase())\n    const bodys = flowTokens.map(token => {\n      return (token && this.tagBodyMap.get(token)) || token\n    })\n    const slidesFromFlowTokens: Slide[] = bodys.flatMap(body => {\n      if (typeof body === 'string') {\n        return [{ tag: body, body: '' }]\n      } else {\n        return convertBodyToSlide(body)\n      }\n    })\n    const slidesFromUntaggedBodys = this.bodysWithNoTag.flatMap($0 => convertBodyToSlide($0))\n    return slidesFromFlowTokens.concat(slidesFromUntaggedBodys)\n  }\n\n  toSlides(method: SlideConvertMethod = SlideConvertMethod.withFlowOrder): Slide[] {\n    switch (method) {\n      case SlideConvertMethod.withFlowOrder:\n        return this.toSlideFlowOrder()\n      case SlideConvertMethod.withBodyOrder:\n        return this.toSlideBodyOrder()\n      default:\n        return this.toSlideBodyOrder()\n    }\n  }\n\n  toString(): string {\n    return `\n\t\t\t* title: ${this.title}\n\t\t\t* flow: ${this.flow}\n\t\t\t* linkUrl: ${this.linkUrl}\n\t\t\t* bodys: ${this.bodys.map(({ tag, lines }) => `[${tag}]\\n${lines.join('\\n')}`).join('\\n\\n')}\n\t\t\t* tagBodyMap: ${this.tagBodyMap}\n\t\t\t* bodysWithNoTag: ${this.bodysWithNoTag}\n\t\t\t* comments: ${this.comments}\n\t\t`\n  }\n}\n","export default function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","export default function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}","import unsupportedIterableToArray from \"@babel/runtime/helpers/esm/unsupportedIterableToArray\";\nexport default function _createForOfIteratorHelper(o, allowArrayLike) {\n  var it;\n\n  if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) {\n    if (Array.isArray(o) || (it = unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") {\n      if (it) o = it;\n      var i = 0;\n\n      var F = function F() {};\n\n      return {\n        s: F,\n        n: function n() {\n          if (i >= o.length) return {\n            done: true\n          };\n          return {\n            done: false,\n            value: o[i++]\n          };\n        },\n        e: function e(_e) {\n          throw _e;\n        },\n        f: F\n      };\n    }\n\n    throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n\n  var normalCompletion = true,\n      didErr = false,\n      err;\n  return {\n    s: function s() {\n      it = o[Symbol.iterator]();\n    },\n    n: function n() {\n      var step = it.next();\n      normalCompletion = step.done;\n      return step;\n    },\n    e: function e(_e2) {\n      didErr = true;\n      err = _e2;\n    },\n    f: function f() {\n      try {\n        if (!normalCompletion && it[\"return\"] != null) it[\"return\"]();\n      } finally {\n        if (didErr) throw err;\n      }\n    }\n  };\n}","import arrayLikeToArray from \"@babel/runtime/helpers/esm/arrayLikeToArray\";\nexport default function _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}","export function isNonNumericKey(key) {\r\n    return key !== String(parseFloat(key));\r\n}\r\nexport function getOwnEnumerableNonNumericKeysES6(obj) {\r\n    return Object.getOwnPropertyNames(obj).filter(function (key) {\r\n        return obj.propertyIsEnumerable(key) && isNonNumericKey(key);\r\n    });\r\n}\r\nexport function getOwnEnumerableNonNumericKeysES5(obj) {\r\n    return Object.keys(obj).filter(isNonNumericKey);\r\n}\r\nexport function getOwnEnumerableNonNumericKeysES3(obj) {\r\n    var result = [];\r\n    for (var key in obj) {\r\n        if (obj.hasOwnProperty(key) &&\r\n            obj.propertyIsEnumerable(key) &&\r\n            isNonNumericKey(key)) {\r\n            result.push(key);\r\n        }\r\n    }\r\n    return result;\r\n}\r\nexport var getOwnEnumerableNonNumericKeys = Object.getOwnPropertyNames\r\n    ? getOwnEnumerableNonNumericKeysES6\r\n    : Object.keys\r\n        ? getOwnEnumerableNonNumericKeysES5\r\n        : getOwnEnumerableNonNumericKeysES3;\r\n//# sourceMappingURL=objectKeysUtil.js.map","import { isNonNumericKey, getOwnEnumerableNonNumericKeys } from \"./objectKeysUtil\";\r\nvar EnumWrapper = (function () {\r\n    function EnumWrapper(enumObj) {\r\n        this.enumObj = enumObj;\r\n        this.keysList = Object.freeze(getOwnEnumerableNonNumericKeys(enumObj));\r\n        var length = this.keysList.length;\r\n        var valuesList = new Array(length);\r\n        var keysByValueMap = new Map();\r\n        for (var index = 0; index < length; ++index) {\r\n            var key = this.keysList[index];\r\n            var value = enumObj[key];\r\n            valuesList[index] = value;\r\n            keysByValueMap.set(value, key);\r\n            this[index] = Object.freeze([key, value]);\r\n        }\r\n        this.valuesList = Object.freeze(valuesList);\r\n        this.keysByValueMap = keysByValueMap;\r\n        this.size = this.length = length;\r\n        Object.freeze(this);\r\n    }\r\n    EnumWrapper.prototype.toString = function () {\r\n        return \"[object EnumWrapper]\";\r\n    };\r\n    EnumWrapper.prototype.keys = function () {\r\n        var _a;\r\n        var _this = this;\r\n        var index = 0;\r\n        return _a = {\r\n                next: function () {\r\n                    var isDone = index >= _this.length;\r\n                    var result = {\r\n                        done: isDone,\r\n                        value: _this.keysList[index]\r\n                    };\r\n                    ++index;\r\n                    return result;\r\n                }\r\n            },\r\n            _a[Symbol.iterator] = function () {\r\n                return this;\r\n            },\r\n            _a;\r\n    };\r\n    EnumWrapper.prototype.values = function () {\r\n        var _a;\r\n        var _this = this;\r\n        var index = 0;\r\n        return _a = {\r\n                next: function () {\r\n                    var isDone = index >= _this.length;\r\n                    var result = {\r\n                        done: isDone,\r\n                        value: _this.valuesList[index]\r\n                    };\r\n                    ++index;\r\n                    return result;\r\n                }\r\n            },\r\n            _a[Symbol.iterator] = function () {\r\n                return this;\r\n            },\r\n            _a;\r\n    };\r\n    EnumWrapper.prototype.entries = function () {\r\n        var _a;\r\n        var _this = this;\r\n        var index = 0;\r\n        return _a = {\r\n                next: function () {\r\n                    var isDone = index >= _this.length;\r\n                    var result = {\r\n                        done: isDone,\r\n                        value: _this[index]\r\n                    };\r\n                    ++index;\r\n                    return result;\r\n                }\r\n            },\r\n            _a[Symbol.iterator] = function () {\r\n                return this;\r\n            },\r\n            _a;\r\n    };\r\n    EnumWrapper.prototype[Symbol.iterator] = function () {\r\n        return this.entries();\r\n    };\r\n    EnumWrapper.prototype.forEach = function (iteratee, context) {\r\n        var length = this.length;\r\n        for (var index = 0; index < length; ++index) {\r\n            var entry = this[index];\r\n            iteratee.call(context, entry[1], entry[0], this, index);\r\n        }\r\n    };\r\n    EnumWrapper.prototype.map = function (iteratee, context) {\r\n        var length = this.length;\r\n        var result = new Array(length);\r\n        for (var index = 0; index < length; ++index) {\r\n            var entry = this[index];\r\n            result[index] = iteratee.call(context, entry[1], entry[0], this, index);\r\n        }\r\n        return result;\r\n    };\r\n    EnumWrapper.prototype.getKeys = function () {\r\n        return this.keysList.slice();\r\n    };\r\n    EnumWrapper.prototype.getValues = function () {\r\n        return this.valuesList.slice();\r\n    };\r\n    EnumWrapper.prototype.getEntries = function () {\r\n        return Array.prototype.slice.call(this);\r\n    };\r\n    EnumWrapper.prototype.indexOfKey = function (key) {\r\n        return this.keysList.indexOf(key);\r\n    };\r\n    EnumWrapper.prototype.indexOfValue = function (value) {\r\n        return this.valuesList.indexOf(value);\r\n    };\r\n    EnumWrapper.prototype.isKey = function (key) {\r\n        return (key != null &&\r\n            isNonNumericKey(key) &&\r\n            this.enumObj.hasOwnProperty(key));\r\n    };\r\n    EnumWrapper.prototype.asKeyOrThrow = function (key) {\r\n        if (this.isKey(key)) {\r\n            return key;\r\n        }\r\n        else {\r\n            throw new Error(\"Unexpected key: \" + key + \". Expected one of: \" + this.getValues());\r\n        }\r\n    };\r\n    EnumWrapper.prototype.asKeyOrDefault = function (key, defaultKey) {\r\n        if (this.isKey(key)) {\r\n            return key;\r\n        }\r\n        else {\r\n            return defaultKey;\r\n        }\r\n    };\r\n    EnumWrapper.prototype.isValue = function (value) {\r\n        return value != null && this.keysByValueMap.has(value);\r\n    };\r\n    EnumWrapper.prototype.asValueOrThrow = function (value) {\r\n        if (this.isValue(value)) {\r\n            return value;\r\n        }\r\n        else {\r\n            throw new Error(\"Unexpected value: \" + value + \". Expected one of: \" + this.getValues());\r\n        }\r\n    };\r\n    EnumWrapper.prototype.asValueOrDefault = function (value, defaultValue) {\r\n        if (this.isValue(value)) {\r\n            return value;\r\n        }\r\n        else {\r\n            return defaultValue;\r\n        }\r\n    };\r\n    EnumWrapper.prototype.getKeyOrThrow = function (value) {\r\n        var result = value != null ? this.keysByValueMap.get(value) : undefined;\r\n        if (result != null) {\r\n            return result;\r\n        }\r\n        else {\r\n            throw new Error(\"Unexpected value: \" + value + \". Expected one of: \" + this.getValues());\r\n        }\r\n    };\r\n    EnumWrapper.prototype.getKeyOrDefault = function (value, defaultKey) {\r\n        var result = value != null ? this.keysByValueMap.get(value) : undefined;\r\n        if (result != null) {\r\n            return result;\r\n        }\r\n        else {\r\n            return defaultKey;\r\n        }\r\n    };\r\n    EnumWrapper.prototype.getValueOrThrow = function (key) {\r\n        return this.enumObj[this.asKeyOrThrow(key)];\r\n    };\r\n    EnumWrapper.prototype.getValueOrDefault = function (key, defaultValue) {\r\n        if (this.isKey(key)) {\r\n            return this.enumObj[key];\r\n        }\r\n        else {\r\n            return defaultValue;\r\n        }\r\n    };\r\n    return EnumWrapper;\r\n}());\r\nexport { EnumWrapper };\r\nEnumWrapper.prototype[Symbol.toStringTag] = \"EnumWrapper\";\r\n//# sourceMappingURL=EnumWrapper.js.map","export var unhandledEntry = Symbol(\"ts-enum-util:unhandledEntry\");\r\nexport var handleNull = Symbol(\"ts-enum-util:handleNull\");\r\nexport var handleUndefined = Symbol(\"ts-enum-util:handleUndefined\");\r\nexport var handleUnexpected = Symbol(\"ts-enum-util:handleUnexpected\");\r\n//# sourceMappingURL=symbols.js.map","export function createUnhandledEntryError(unhandledValue) {\r\n    return new Error(\"Unhandled value: \" + unhandledValue);\r\n}\r\n//# sourceMappingURL=createUnhandledEntryError.js.map","import { handleUnexpected, handleNull, handleUndefined, unhandledEntry } from \"./symbols\";\r\nimport { createUnhandledEntryError } from \"./createUnhandledEntryError\";\r\nvar EnumValueVisitee = (function () {\r\n    function EnumValueVisitee(value) {\r\n        this.value = value;\r\n    }\r\n    EnumValueVisitee.prototype.with = function (visitor) {\r\n        if (visitor.hasOwnProperty(this.value)) {\r\n            var handler = visitor[this.value];\r\n            return processEntry(handler, this.value);\r\n        }\r\n        else if (visitor[handleUnexpected]) {\r\n            return processEntry(visitor[handleUnexpected], this.value);\r\n        }\r\n        else {\r\n            throw new Error(\"Unexpected value: \" + this.value);\r\n        }\r\n    };\r\n    return EnumValueVisitee;\r\n}());\r\nexport { EnumValueVisitee };\r\nvar EnumValueVisiteeWithNull = (function () {\r\n    function EnumValueVisiteeWithNull() {\r\n    }\r\n    EnumValueVisiteeWithNull.prototype.with = function (visitor) {\r\n        if (visitor[handleNull]) {\r\n            return processEntry(visitor[handleNull], null);\r\n        }\r\n        else if (visitor[handleUnexpected]) {\r\n            return processEntry(visitor[handleUnexpected], null);\r\n        }\r\n        else {\r\n            throw new Error(\"Unexpected value: null\");\r\n        }\r\n    };\r\n    return EnumValueVisiteeWithNull;\r\n}());\r\nexport { EnumValueVisiteeWithNull };\r\nvar EnumValueVisiteeWithUndefined = (function () {\r\n    function EnumValueVisiteeWithUndefined() {\r\n    }\r\n    EnumValueVisiteeWithUndefined.prototype.with = function (visitor) {\r\n        if (visitor[handleUndefined]) {\r\n            return processEntry(visitor[handleUndefined], undefined);\r\n        }\r\n        else if (visitor[handleUnexpected]) {\r\n            return processEntry(visitor[handleUnexpected], undefined);\r\n        }\r\n        else {\r\n            throw new Error(\"Unexpected value: undefined\");\r\n        }\r\n    };\r\n    return EnumValueVisiteeWithUndefined;\r\n}());\r\nexport { EnumValueVisiteeWithUndefined };\r\nfunction processEntry(entry, value) {\r\n    if (entry === unhandledEntry) {\r\n        throw createUnhandledEntryError(value);\r\n    }\r\n    else {\r\n        return entry(value);\r\n    }\r\n}\r\n//# sourceMappingURL=EnumValueVisitee.js.map","import { createUnhandledEntryError } from \"./createUnhandledEntryError\";\r\nimport { handleUnexpected, handleNull, handleUndefined, unhandledEntry } from \"./symbols\";\r\nvar EnumValueMappee = (function () {\r\n    function EnumValueMappee(value) {\r\n        this.value = value;\r\n    }\r\n    EnumValueMappee.prototype.with = function (mapper) {\r\n        if (mapper.hasOwnProperty(this.value)) {\r\n            return processEntry(mapper[this.value], this.value);\r\n        }\r\n        else if (mapper.hasOwnProperty(handleUnexpected)) {\r\n            return processEntry(mapper[handleUnexpected], this.value);\r\n        }\r\n        else {\r\n            throw new Error(\"Unexpected value: \" + this.value);\r\n        }\r\n    };\r\n    return EnumValueMappee;\r\n}());\r\nexport { EnumValueMappee };\r\nvar EnumValueMappeeWithNull = (function () {\r\n    function EnumValueMappeeWithNull() {\r\n    }\r\n    EnumValueMappeeWithNull.prototype.with = function (mapper) {\r\n        if (mapper.hasOwnProperty(handleNull)) {\r\n            return processEntry(mapper[handleNull], null);\r\n        }\r\n        else if (mapper.hasOwnProperty(handleUnexpected)) {\r\n            return processEntry(mapper[handleUnexpected], null);\r\n        }\r\n        else {\r\n            throw new Error(\"Unexpected value: null\");\r\n        }\r\n    };\r\n    return EnumValueMappeeWithNull;\r\n}());\r\nexport { EnumValueMappeeWithNull };\r\nvar EnumValueMappeeWithUndefined = (function () {\r\n    function EnumValueMappeeWithUndefined() {\r\n    }\r\n    EnumValueMappeeWithUndefined.prototype.with = function (mapper) {\r\n        if (mapper.hasOwnProperty(handleUndefined)) {\r\n            return processEntry(mapper[handleUndefined], undefined);\r\n        }\r\n        else if (mapper.hasOwnProperty(handleUnexpected)) {\r\n            return processEntry(mapper[handleUnexpected], undefined);\r\n        }\r\n        else {\r\n            throw new Error(\"Unexpected value: undefined\");\r\n        }\r\n    };\r\n    return EnumValueMappeeWithUndefined;\r\n}());\r\nexport { EnumValueMappeeWithUndefined };\r\nfunction processEntry(entry, value) {\r\n    if (entry === unhandledEntry) {\r\n        throw createUnhandledEntryError(value);\r\n    }\r\n    else {\r\n        return entry;\r\n    }\r\n}\r\n//# sourceMappingURL=EnumValueMappee.js.map","import { EnumWrapper } from \"./EnumWrapper\";\r\nimport * as symbols from \"./symbols\";\r\nimport { visitEnumValue } from \"./visitEnumValue\";\r\nimport { mapEnumValue } from \"./mapEnumValue\";\r\nvar enumWrapperInstancesCache = new WeakMap();\r\nexport function $enum(enumObj) {\r\n    var result = enumWrapperInstancesCache.get(enumObj);\r\n    if (!result) {\r\n        result = new EnumWrapper(enumObj);\r\n        enumWrapperInstancesCache.set(enumObj, result);\r\n    }\r\n    return result;\r\n}\r\n$enum.handleNull = symbols.handleNull;\r\n$enum.handleUndefined = symbols.handleUndefined;\r\n$enum.handleUnexpected = symbols.handleUnexpected;\r\n$enum.unhandledEntry = symbols.unhandledEntry;\r\n$enum.visitValue = visitEnumValue;\r\n$enum.mapValue = mapEnumValue;\r\n//# sourceMappingURL=$enum.js.map","import { SongParser, SongPart } from \"./SongParser\";\nimport { $enum } from \"ts-enum-util\";\nimport { Optional } from \"utility-types\";\n\nexport enum LineCategory {\n  empty,\n  linkUrl,\n  tag,\n  flow,\n  title,\n  comment,\n  body,\n  date,\n  separator,\n  unknown,\n}\n\nconst tagPatterns = [/^V\\d?$/i, /^P?C\\d?$/i, /^B\\d?$/i, /^E(nding)$/i];\nconst isTag = (arg: string) => tagPatterns.some((pattern) => pattern.test(arg));\nexport const flowTokenPatterns = [...tagPatterns, /^x\\d$/i, /^간주$/];\nexport const isFlowToken = (arg: string): boolean =>\n  flowTokenPatterns.some((pattern) => pattern.test(arg));\nexport const splitAsTokens = (arg: string): string[] =>\n  arg.split(/[\\W_]/).filter(($0) => /\\w/.test($0));\n\nconst separatorPatterns = [/^[-=*][-=* ]+[-=*]$/];\nconst isSeparator = (arg: string) =>\n  separatorPatterns.some((pattern) => pattern.test(arg));\nconst scoreRange = {\n  certain: 5,\n  notPossible: 0,\n};\n\nconst titleSections = [\n  LineCategory.comment,\n  LineCategory.title,\n  LineCategory.flow,\n  LineCategory.linkUrl,\n];\n\ntype Scorer = (text: string) => number | undefined;\nconst categoryScorer: Partial<Record<LineCategory, Scorer>> = {\n  [LineCategory.empty]: (text) =>\n    text === \"\" ? scoreRange.certain : scoreRange.notPossible,\n  [LineCategory.date]: (text) => undefined,\n  [LineCategory.title]: (text) => {\n    let score = 0;\n    if (/^\\d./.test(text)) {\n      score += 2;\n    }\n    if (/\\(\\w\\)$/.test(text)) {\n      score += 2;\n    }\n    if (/\\(\\w->\\w\\)$/.test(text)) {\n      score += 1;\n    }\n    return score;\n  },\n  [LineCategory.linkUrl]: (text) =>\n    /^https?:\\/\\/.*$/.test(text) ? scoreRange.certain : scoreRange.notPossible,\n  [LineCategory.flow]: (text) => {\n    const tokens = splitAsTokens(text);\n    if (tokens.length === 1) {\n      return scoreRange.notPossible;\n    }\n    const flowTokens = tokens.filter(isFlowToken);\n    return Math.ceil((5 * flowTokens.length) / tokens.length);\n  },\n  [LineCategory.tag]: (text) => {\n    if (isTag(text)) {\n      return scoreRange.certain;\n    }\n    if (/^[A-Z]{,2}\\d?$/i.test(text)) {\n      return 3;\n    }\n  },\n  [LineCategory.body]: (text) => {\n    if (/^[\\w,\"'.)( ]+$/i.test(text)) {\n      return 2;\n    }\n    return 1;\n  },\n  [LineCategory.comment]: (text) => {\n    if (/[가-힣]+/.test(text)) {\n      return 2;\n    }\n    return 1;\n  },\n  [LineCategory.separator]: (text) =>\n    isSeparator(text) ? scoreRange.certain : scoreRange.notPossible,\n};\n\nclass Line {\n  inferedCategory: {\n    value: LineCategory;\n    score: number;\n  };\n  constructor(public text: string) {\n    const categories = $enum(LineCategory).getValues();\n    this.inferedCategory = categories.reduce((result, current) => {\n      if (result?.score === scoreRange.certain) {\n        return result;\n      }\n      const checker = categoryScorer[current];\n      const score = checker?.(text);\n      if (score !== undefined && score > (result?.score ?? -1)) {\n        return { value: current, score: score };\n      }\n      return result;\n    }, undefined as { value: LineCategory; score: number } | undefined) ?? {\n      value: LineCategory.unknown,\n      score: 5,\n    };\n  }\n}\n\nexport class LineParser {\n  lines: Line[];\n  private songsCache?: SongParser[];\n  done = false;\n  constructor(text: string) {\n    this.lines = text\n      .trim()\n      .split(\"\\n\")\n      .map(($0) => $0.trim())\n      .reduce((result, current) => {\n        const lastLine = result[result.length - 1] ?? \"\";\n        if (!(current === \"\" && lastLine.text === \"\")) {\n          result.push(new Line(current));\n        }\n        return result;\n      }, [] as Line[]);\n  }\n\n  songs(): SongParser[] {\n    if (this.songsCache) {\n      return this.songsCache;\n    }\n    const songParts = this.getSongParts();\n    const songs: SongPart[][] = [];\n\n    let currentIndex = 0;\n    while (currentIndex !== -1 && currentIndex < songParts.length) {\n      const currentPart = songParts[currentIndex];\n      if (currentPart.category === LineCategory.separator) {\n        const previousParts = songParts.slice(0, currentIndex);\n        if (isCompleteSong(previousParts)) {\n          songs.push(previousParts);\n          songParts.splice(0, currentIndex);\n          currentIndex = 1;\n          continue;\n        }\n      } else if (titleSections.includes(currentPart.category)) {\n        const firstBodyIndexAfterThis = songParts\n          .slice(currentIndex)\n          .findIndex(($0) => $0.category === LineCategory.body);\n        const titleEndIndex =\n          firstBodyIndexAfterThis !== -1\n            ? currentIndex + firstBodyIndexAfterThis\n            : undefined;\n        console.error(\n          \"current\",\n          currentPart.lines,\n          \"firstbody\",\n          songParts[titleEndIndex ?? -1]?.lines\n        );\n        if (titleEndIndex !== undefined) {\n          const isTitleSection = (() => {\n            const categories = songParts\n              .slice(currentIndex, titleEndIndex)\n              .map(($0) => $0.category);\n            console.error(\n              \"categories\",\n              categories.map(($0) => $enum(LineCategory).getKeyOrDefault($0))\n            );\n            return (\n              categories.includes(LineCategory.title) ||\n              categories.includes(LineCategory.flow) ||\n              categories.includes(LineCategory.linkUrl)\n            );\n          })();\n          console.error(\"is title section\", isTitleSection, \"\\n\");\n          if (isTitleSection) {\n            const previousParts = songParts.slice(0, currentIndex);\n            if (isCompleteSong(previousParts)) {\n              songs.push(previousParts);\n              songParts.splice(0, currentIndex);\n            }\n            console.error(\n              \"current index\",\n              currentIndex,\n              \"->\",\n              firstBodyIndexAfterThis\n            );\n            currentIndex = firstBodyIndexAfterThis;\n            continue;\n          } else {\n            console.error(\"current index\", currentIndex, \"->\", titleEndIndex);\n            currentIndex = firstBodyIndexAfterThis;\n            continue;\n          }\n        }\n      }\n      currentIndex += 1;\n    }\n    if (isCompleteSong(songParts)) {\n      songs.push(songParts);\n    }\n\n    this.songsCache = songs.map(($0) => new SongParser($0));\n    return this.songsCache;\n  }\n\n  getSongParts(): SongPart[] {\n    const songParts = [] as Optional<SongPart, \"end\" | \"lines\">[];\n    this.lines.forEach((line, index) => {\n      const last = songParts[songParts.length - 1];\n      if (last === undefined) {\n        songParts.push({ start: index, category: line.inferedCategory.value });\n      } else if (last.category !== line.inferedCategory.value) {\n        last.end = index;\n        songParts.push({ start: index, category: line.inferedCategory.value });\n      }\n    });\n    if (songParts[songParts.length - 1]) {\n      songParts[songParts.length - 1].end = this.lines.length;\n    }\n    return songParts.flatMap((part) => {\n      const { start, end, category } = part;\n      if (end === undefined) {\n        return [];\n      }\n      return [\n        {\n          start,\n          end,\n          category,\n          lines: this.lines.slice(start, end).map(($0) => $0.text),\n        },\n      ];\n    });\n  }\n}\n\nfunction isCompleteSong(songParts: SongPart[]): boolean {\n  return songParts.filter(($0) => $0.category === LineCategory.body).length > 0;\n}\n","import { EnumValueVisitee, EnumValueVisiteeWithNull, EnumValueVisiteeWithUndefined } from \"./EnumValueVisitee\";\r\nexport function visitEnumValue(value) {\r\n    if (value === null) {\r\n        return new EnumValueVisiteeWithNull();\r\n    }\r\n    else if (value === undefined) {\r\n        return new EnumValueVisiteeWithUndefined();\r\n    }\r\n    else {\r\n        return new EnumValueVisitee(value);\r\n    }\r\n}\r\n//# sourceMappingURL=visitEnumValue.js.map","import { EnumValueMappee, EnumValueMappeeWithNull, EnumValueMappeeWithUndefined } from \"./EnumValueMappee\";\r\nexport function mapEnumValue(value) {\r\n    if (value === null) {\r\n        return new EnumValueMappeeWithNull();\r\n    }\r\n    else if (value === undefined) {\r\n        return new EnumValueMappeeWithUndefined();\r\n    }\r\n    else {\r\n        return new EnumValueMappee(value);\r\n    }\r\n}\r\n//# sourceMappingURL=mapEnumValue.js.map","import { LineParser } from './LineParser'\nimport { Slide, SlideConvertMethod, SongParser } from './SongParser'\n\nfunction convertSlideToFormText(slide: Slide): string {\n  const { tag, body } = slide\n  return [`[[${tag ?? ''}]]`, body || tag].join('\\n')\n}\nfunction convertSongSlidesToFormText(slides: Slide[]): string {\n  return slides.map(convertSlideToFormText).join('\\n---\\n')\n}\n\nexport class LyricParser {\n  lineParser: LineParser\n  songParsers: SongParser[]\n  constructor(text: string) {\n    this.lineParser = new LineParser(text)\n    this.songParsers = this.lineParser.songs()\n  }\n\n  toFormText(method: SlideConvertMethod = SlideConvertMethod.withFlowOrder): string {\n    return this.songParsers\n      .map($0 => {\n        return convertSongSlidesToFormText($0.toSlides(method))\n      })\n      .join('\\n===\\n')\n  }\n}\n","import \"./index.css\";\nimport { LyricParser } from \"./parser/LyricParser\";\n\nwindow.onload = () => {\n  console.log(\"On load\");\n  const submitButton = document.getElementById(\n    \"submit-button\"\n  ) as HTMLButtonElement;\n  const form = document.lyricsform;\n  const textArea = form.lyrics;\n  const hiddenBody = form.body;\n  submitButton.onclick = function () {\n    const myDiv = document.createElement(\"div\");\n    form.parentElement?.appendChild(myDiv);\n    const parser = new LyricParser(textArea.value);\n    hiddenBody.value = parser.toFormText();\n    myDiv.textContent = hiddenBody.value;\n    form.submit();\n  };\n};\n"],"sourceRoot":""}